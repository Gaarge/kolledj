-- create_and_seed.sql
CREATE TABLE IF NOT EXISTS schedule (
  id SERIAL PRIMARY KEY,
  date DATE NOT NULL,
  pair_number SMALLINT NOT NULL,
  time_start TIME NOT NULL,
  time_end TIME NOT NULL,
  subject TEXT NOT NULL,
  session_type VARCHAR(16) NOT NULL,
  room VARCHAR(32),
  teacher VARCHAR(128),
  group_name VARCHAR(32) NOT NULL,
  created_at TIMESTAMPTZ DEFAULT now(),
  UNIQUE (group_name, date, pair_number)
);

CREATE INDEX IF NOT EXISTS idx_schedule_date ON schedule (date);
CREATE INDEX IF NOT EXISTS idx_schedule_group_date ON schedule (group_name, date);

-- Тестовые данные (по примеру, 2 недели)
-- Неделя 1 (2025-10-06 — 2025-10-11)
INSERT INTO schedule (date, pair_number, time_start, time_end, subject, session_type, room, teacher, group_name) VALUES
('2025-10-06', 1, '09:00', '10:30', 'Математический анализ', 'lecture', '101', 'Иванов И.И.', 'ИВТ-31'),
('2025-10-06', 2, '10:40', '12:10', 'Физика', 'practice', '148', 'Петров П.П.', 'ИВТ-31'),
('2025-10-06', 5, '16:00', '17:30', 'Программирование', 'seminar', '205', 'Сидоров С.С.', 'ИВТ-31'),

('2025-10-07', 1, '09:00', '10:30', 'Философия', 'lecture', '110', 'Кузнецова А.А.', 'ИВТ-31'),
('2025-10-07', 2, '10:40', '12:10', 'Физкультура', 'practice', 'gym', 'Смирнов Д.Д.', 'ИВТ-31'),

('2025-10-08', 3, '12:20', '13:50', 'Алгебра', 'lecture', '109', 'Николаев Н.Н.', 'ИВТ-31'),
('2025-10-08', 4, '14:00', '15:30', 'Базы данных', 'practice', '212', 'Орлова О.О.', 'ИВТ-31'),

('2025-10-09', 1, '09:00', '10:30', 'История', 'lecture', '115', 'Ильин И.И.', 'ИВТ-31'),
('2025-10-09', 2, '10:40', '12:10', 'Теория вероятностей', 'lecture', '117', 'Лебедева Л.Л.', 'ИВТ-31'),
('2025-10-09', 4, '14:00', '15:30', 'Операционные системы', 'seminar', '220', 'Громов Г.Г.', 'ИВТ-31'),

('2025-10-10', 1, '09:00', '10:30', 'Экономика', 'lecture', '121', 'Павлова П.П.', 'ИВТ-31'),
('2025-10-10', 2, '10:40', '12:10', 'Право', 'seminar', '119', 'Котов К.К.', 'ИВТ-31'),
('2025-10-10', 5, '16:00', '17:30', 'Сети', 'practice', '230', 'Мельников М.М.', 'ИВТ-31'),

('2025-10-11', 3, '12:20', '13:50', 'Иностранный язык', 'lecture', '130', 'Васильева В.В.', 'ИВТ-31');

-- Неделя 2 (2025-10-13 — 2025-10-18)
INSERT INTO schedule (date, pair_number, time_start, time_end, subject, session_type, room, teacher, group_name) VALUES
('2025-10-13', 1, '09:00', '10:30', 'Математический анализ', 'lecture', '101', 'Иванов И.И.', 'ИВТ-31'),
('2025-10-13', 2, '10:40', '12:10', 'Физика', 'practice', '148', 'Петров П.П.', 'ИВТ-31'),
('2025-10-13', 4, '14:00', '15:30', 'Программирование', 'seminar', '205', 'Сидоров С.С.', 'ИВТ-31'),

('2025-10-14', 3, '12:20', '13:50', 'Базы данных', 'lecture', '212', 'Орлова О.О.', 'ИВТ-31'),
('2025-10-14', 4, '14:00', '15:30', 'Тестирование', 'seminar', '214', 'Киселёв К.К.', 'ИВТ-31'),

('2025-10-15', 1, '09:00', '10:30', 'Алгоритмы', 'lecture', '118', 'Литвинов Л.Л.', 'ИВТ-31'),
('2025-10-15', 2, '10:40', '12:10', 'Компьютерная графика', 'seminar', '201', 'Белоусов Б.Б.', 'ИВТ-31'),
('2025-10-15', 5, '16:00', '17:30', 'Архитектура ЭВМ', 'practice', '207', 'Зайцева З.З.', 'ИВТ-31'),

('2025-10-16', 2, '10:40', '12:10', 'Философия', 'lecture', '110', 'Кузнецова А.А.', 'ИВТ-31'),

('2025-10-17', 1, '09:00', '10:30', 'История', 'lecture', '115', 'Ильин И.И.', 'ИВТ-31'),
('2025-10-17', 3, '12:20', '13:50', 'Практика', 'practice', '150', 'Комаров К.К.', 'ИВТ-31'),

('2025-10-18', 4, '14:00', '15:30', 'Сети', 'seminar', '230', 'Мельников М.М.', 'ИВТ-31');
